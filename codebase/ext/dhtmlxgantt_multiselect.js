/*!
 * @license
 * 
 * dhtmlxGantt v.5.0.5 Stardard
 * This software is covered by GPL license. You also can obtain Commercial or Enterprise license to use it in non-GPL project - please contact sales@dhtmlx.com. Usage without proper license is prohibited.
 * 
 * (c) Dinamenta, UAB.
 * 
 */
!function(t){function e(n){if(s[n])return s[n].exports;var l=s[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,e),l.l=!0,l.exports}var s={};e.m=t,e.c=s,e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=19)}({19:function(t,e,s){t.exports=s(20)},20:function(t,e){gantt.config.multiselect=!0,gantt.config.multiselect_one_level=!1,gantt._multiselect={selected:{},one_level:!0,active:!0,_first_selected_when_shift:null,isActive:function(){return this.update_state(),this.active},update_state:function(){this.one_level=gantt.config.multiselect_one_level;var t=this.active;this.active=gantt.config.multiselect,this.active!=t&&this.reset()},reset:function(){this.selected={}},set_last_selected:function(t){this.last_selected=t},getLastSelected:function(){var t=this.last_selected;return t&&gantt.isTaskExists(t)?t:null},select:function(t,e){gantt.callEvent("onBeforeTaskMultiSelect",[t,!0,e])&&(this.selected[t]=!0,this.set_last_selected(t),gantt.callEvent("onTaskMultiSelect",[t,!0,e]))},toggle:function(t,e){this.selected[t]?this.unselect(t,e):this.select(t,e)},unselect:function(t,e){gantt.callEvent("onBeforeTaskMultiSelect",[t,!1,e])&&(this.selected[t]=!1,this.last_selected==t&&(this.last_selected=null),gantt.callEvent("onTaskMultiSelect",[t,!1,e]))},isSelected:function(t){return!(!gantt.isTaskExists(t)||!this.selected[t])},getSelected:function(){var t=[];for(var e in this.selected)this.selected[e]&&gantt.isTaskExists(e)?t.push(e):this.selected[e]=!1;return t.sort(function(t,e){return gantt.calculateTaskLevel(gantt.getTask(t))>gantt.calculateTaskLevel(gantt.getTask(e))?1:-1}),t},forSelected:function(t){for(var e=this.getSelected(),s=0;s<e.length;s++)t(e[s])},is_same_level:function(t){if(!this.one_level)return!0;var e=this.getLastSelected();return!e||(!gantt.isTaskExists(e)||!gantt.isTaskExists(t)||!(gantt.calculateTaskLevel(gantt.getTask(e))!=gantt.calculateTaskLevel(gantt.getTask(t))))},_after_select:function(t){gantt.refreshTask(t)},_do_selection:function(t){if(!this.isActive())return!0;if(!gantt.callEvent("onBeforeMultiSelect",[t]))return!0;var e=gantt.locate(t);if(!e)return!0;var s=this.getLastSelected(),n=this.getSelected();if(t.shiftKey?gantt.isTaskExists(this._first_selected_when_shift)&&null!==this._first_selected_when_shift||(this._first_selected_when_shift=e):t.ctrlKey||t.metaKey?this.isSelected(e)||(this._first_selected_when_shift=e):this._first_selected_when_shift=e,t.ctrlKey||t.metaKey)!e||e===this._first_selected_when_shift&&this.isSelected(this._first_selected_when_shift)||(this.toggle(e,t),this._after_select(e));else if(t.shiftKey&&n.length){if(s||(s=e),e){for(var l=gantt.getGlobalTaskIndex(this._first_selected_when_shift),i=gantt.getGlobalTaskIndex(e),c=gantt.getGlobalTaskIndex(s),a=s;gantt.getGlobalTaskIndex(a)!=l;)this.unselect(a),this._after_select(a),a=l>c?gantt.getNext(a):gantt.getPrev(a);for(a=e;gantt.getGlobalTaskIndex(a)!=l;)this.select(a),this._after_select(a),a=l>i?gantt.getNext(a):gantt.getPrev(a)}}else{this.isSelected(e)||(this.select(e),this._after_select(e));for(var r=0;r<n.length;r++)n[r]!==e&&(this.unselect(n[r]),this._after_select(n[r]))}return!!this.isSelected(e)}},function(){var t=gantt.selectTask;gantt.selectTask=function(e){var s=t.call(this,e);return this.config.multiselect&&this._multiselect.select(e),s};var e=gantt.unselectTask;gantt.unselectTask=function(t){return void 0!==t&&this.config.multiselect&&this._multiselect.unselect(t),e.call(this,t)},gantt.toggleTaskSelection=function(t){this.config.multiselect&&this._multiselect.toggle(t)},gantt.getSelectedTasks=function(){return this._multiselect.getSelected()},gantt.eachSelectedTask=function(t){return this._multiselect.forSelected(t)},gantt.isSelectedTask=function(t){return this._multiselect.isSelected(t)},gantt.getLastSelectedTask=function(){return this._multiselect.getLastSelected()}}(),gantt.attachEvent("onTaskIdChange",function(t,e){var s=gantt._multiselect;if(!s.isActive())return!0;gantt.isSelectedTask(t)&&(s.unselect(t,null),s.select(e,null),gantt.refreshTask(e))}),gantt.attachEvent("onAfterTaskDelete",function(t,e){var s=gantt._multiselect;if(!s.isActive())return!0;s.selected[t]&&s.unselect(t,null),s.forSelected(function(t){gantt.isTaskExists(t)||s.unselect(t,null)})}),gantt.attachEvent("onBeforeTaskMultiSelect",function(t,e,s){var n=gantt._multiselect;return!e||!n.isActive()||n.is_same_level(t)}),gantt.attachEvent("onTaskClick",function(t,e){var s=gantt._multiselect._do_selection(e);return gantt.callEvent("onMultiSelect",[e]),s}),gantt.attachEvent("onEmptyClick",function(t){return gantt._multiselect._do_selection(t),gantt.callEvent("onMultiSelect",[t]),!0})}});
//# sourceMappingURL=dhtmlxgantt_multiselect.js.map