{"version":3,"sources":["webpack:///dhtmlxgantt_undo.js","webpack:///webpack/bootstrap 4a949578cbbb066f713d","webpack:///./sources/ext/undo.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","27","28","gantt","config","undo_steps","undo","redo","this","_undo","getUndoStack","_undoStack","getRedoStack","_redoStack","undo_types","link","task","undo_actions","update","remove","add","maxSteps","undo_enabled","redo_enabled","_push","stack","action","commands","length","push","shift","_pop","pop","updateConfigs","callEvent","_applyAction","invert","command","entities","entity","actions","type","methods","isExists","batchUpdate","method","check","oldValue","parent","$index","value","id","logAction","create","slice","revert","copy","inverseCommands","load","clear","assert","monitor","_batchAction","_batchMode","_ignore","startIgnore","stopIgnore","startBatchAction","timeout","clearTimeout","setTimeout","stopBatchAction","_storeCommand","_storeEntityCommand","obj","old","actionType","entityType","_storeTaskCommand","getInitialTask","_storeLinkCommand","getInitialLink","onTaskAdded","onTaskUpdated","onTaskDeleted","_nestedTasks","children","_nestedLinks","childrenLinks","onLinkAdded","onLinkUpdated","onLinkDeleted","_initialTasks","_getLinks","$source","concat","$target","setNestedTasks","taskIds","tasks","linkIds","getTask","setInitialTask","uniqueLinks","links","setInitialLink","getTaskIndex","_initialLinks","getLink","store","updTask","oldId","newId","changeTaskCommandId","updLink","oldTaskId","newTaskId","source","target","changeLinkCommandId","updateTasksIds","log","entry","j","updateLinksIds","noTrack","onBeforeUndo","onBeforeRedo","attachEvent","batchActions","nested","eachTask"],"mappings":"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","file":"dhtmlxgantt_undo.js","sourcesContent":["/*!\n * @license\n * \n * dhtmlxGantt v.5.0.5 Stardard\n * This software is covered by GPL license. You also can obtain Commercial or Enterprise license to use it in non-GPL project - please contact sales@dhtmlx.com. Usage without proper license is prohibited.\n * \n * (c) Dinamenta, UAB.\n * \n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 27);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 27:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(28);\n\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, exports) {\n\ngantt.config.undo_steps = 10;\ngantt.config.undo = true;\ngantt.config.redo = true;\n\ngantt.undo = function(){\n\tthis._undo.undo();\n};\n\ngantt.getUndoStack = function(){\n\treturn this._undo._undoStack;\n};\n\ngantt.getRedoStack = function(){\n\treturn this._undo._redoStack;\n};\n\ngantt.redo = function(){\n\tthis._undo.redo();\n};\n\n/**\n * entities that require different processing for undoing-redoing changes\n * @type {{link: string, task: string}}\n */\ngantt.config.undo_types = {\n\tlink: \"link\",\n\ttask: \"task\"\n};\n\n/**\n * types of traced actions\n * @type {{update: string, remove: string, add: string}}\n */\ngantt.config.undo_actions = {\n\tupdate:\"update\",\n\tremove:\"remove\",// remove item from datastore\n\tadd:\"add\"\n};\n\ngantt._undo = {\n\t_undoStack:[],\n\t_redoStack:[],\n\tmaxSteps:10,\n\tundo_enabled: true,\n\tredo_enabled: true,\n\t_push: function(stack, action){\n\t\tif(!action.commands.length)\n\t\t\treturn;\n\n\n\t\tstack.push(action);\n\t\twhile(stack.length > this.maxSteps){\n\t\t\tstack.shift();\n\t\t}\n\t\treturn action;\n\t},\n\t_pop:function(stack){\n\t\treturn stack.pop();\n\t},\n\n\tundo:function(){\n\t\tthis.updateConfigs();\n\t\tif(!this.undo_enabled)\n\t\t\treturn;\n\n\t\tvar action = this._pop(this._undoStack);\n\t\tif(gantt.callEvent(\"onBeforeUndo\", [action]) !== false){\n\t\t\tif(action){\n\n\t\t\t\tthis._applyAction(this.action.invert(action));\n\t\t\t\tthis._push(this._redoStack, action);\n\t\t\t}\n\t\t}\n\t\tgantt.callEvent(\"onAfterUndo\", []);\n\t},\n\n\tredo:function(){\n\t\tthis.updateConfigs();\n\t\tif(!this.redo_enabled)\n\t\t\treturn;\n\n\t\tvar action = this._pop(this._redoStack);\n\t\t\tif(gantt.callEvent(\"onBeforeRedo\", [action]) !== false){\n\t\t\t\tif(action){\n\t\t\t\t\tthis._applyAction(action);\n\t\t\t\t\tthis._push(this._undoStack, action);\n\t\t\t\t}\n\t\t}\n\t\tgantt.callEvent(\"onAfterRedo\", []);\n\t},\n\n\t_applyAction:function(action){\n\t\tvar command = null,\n\t\t\tentities = this.command.entity,\n\t\t\tactions = this.command.type;\n\n\t\tvar methods = {};\n\t\tmethods[entities.task] = {\n\t\t\tadd: \"addTask\",\n\t\t\tupdate: \"updateTask\",\n\t\t\tremove: \"deleteTask\",\n\t\t\tisExists: \"isTaskExists\"\n\t\t};\n\t\tmethods[entities.link] = {\n\t\t\tadd: \"addLink\",\n\t\t\tupdate: \"updateLink\",\n\t\t\tremove: \"deleteLink\",\n\t\t\tisExists: \"isLinkExists\"\n\t\t};\n\n\t\tgantt.batchUpdate(function(){\n\t\t\tfor(var i = 0; i < action.commands.length; i++){\n\t\t\t\tcommand = action.commands[i];\n\t\t\t\tvar method = methods[command.entity][command.type],\n\t\t\t\t\tcheck = methods[command.entity][\"isExists\"];\n\n\t\t\t\tif(command.type == actions.add){\n\t\t\t\t\tgantt[method](command.oldValue, command.oldValue.parent, command.oldValue.$index);\n\t\t\t\t}else if(command.type == actions.remove){\n\t\t\t\t\tif(gantt[check](command.value.id))\n\t\t\t\t\t\tgantt[method](command.value.id);\n\t\t\t\t}else if(command.type == actions.update){\n\n\t\t\t\t\tgantt[method](command.value.id, command.value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t//storeUndo:\n\tlogAction: function(action){\n\t\tthis._push(this._undoStack, action);\n\t\tthis._redoStack = [];\n\t},\n\n\taction: {\n\t\tcreate: function(commands){\n\t\t\treturn {commands: commands ? commands.slice() : []};\n\t\t},\n\t\tinvert: function(action){\n\t\t\tvar revert = gantt.copy(action);\n\t\t\tvar commands = gantt._undo.command;\n\n\t\t\tfor(var i = 0; i < action.commands.length; i++){\n\t\t\t\tvar command = revert.commands[i] = commands.invert(revert.commands[i]);\n\t\t\t\tif(command.type == commands.type.update){\n\t\t\t\t\tvar value = command.value;\n\t\t\t\t\tcommand.value = command.oldValue;\n\t\t\t\t\tcommand.oldValue = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn revert;\n\t\t}\n\t},\n\n\tcommand:{\n\t\tcreate: function(value, oldValue, type, entity){\n\t\t\treturn {\n\t\t\t\tentity:entity,\n\t\t\t\ttype:type,\n\t\t\t\tvalue:gantt.copy(value),\n\t\t\t\toldValue:gantt.copy(oldValue || value)\n\t\t\t};\n\t\t},\n\t\tinvert: function(command){\n\t\t\tvar revert = gantt.copy(command);\n\t\t\trevert.type = this.inverseCommands(command.type);\n\t\t\treturn revert;\n\t\t},\n\t\t// entities that require different processing for undoing-redoing changes\n\t\tentity:null,\n\n\t\t//types of traced actions\n\t\ttype:null,\n\t\tinverseCommands:function(command){\n\t\t\tswitch (command){\n\t\t\t\tcase this.type.update:\n\t\t\t\t\treturn this.type.update;\n\t\t\t\tcase this.type.remove:\n\t\t\t\t\treturn this.type.add;\n\t\t\t\tcase this.type.add:\n\t\t\t\t\treturn this.type.remove;\n\t\t\t\tcase this.type.load:\n\t\t\t\t\treturn this.type.clear;\n\t\t\t\tcase this.type.clear:\n\t\t\t\t\treturn this.type.load;\n\t\t\t\tdefault:\n\t\t\t\t\tgantt.assert(false, \"Invalid command \"+ command);\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t},\n\n\tmonitor: {\n\t\t_batchAction: null,\n\t\t_batchMode: false,\n\t\t_ignore: false,\n\t\tstartIgnore: function(){\n\t\t\tthis._ignore = true;\n\t\t},\n\t\tstopIgnore: function(){\n\t\t\tthis._ignore = false;\n\t\t},\n\t\tstartBatchAction : function(){\n\t\t\t// try catching updates made from event handlers using timeout\n\t\t\tif(this.timeout){\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t}\n\t\t\tthis.timeout = setTimeout(function(){\n\t\t\t\tgantt._undo.monitor.stopBatchAction();\n\t\t\t}, 10);\n\n\n\t\t\tif(this._ignore || this._batchMode)\n\t\t\t\treturn;\n\n\t\t\tthis._batchMode = true;\n\t\t\tthis._batchAction = gantt._undo.action.create();\n\t\t},\n\t\tstopBatchAction: function(){\n\t\t\tif(this._ignore)\n\t\t\t\treturn;\n\t\t\tvar undo = gantt._undo;\n\t\t\tif(this._batchAction){\n\t\t\t\tundo.logAction(this._batchAction);\n\t\t\t}\n\t\t\tthis._batchMode = false;\n\t\t\tthis._batchAction = null;\n\t\t},\n\n\t\t_storeCommand: function(command){\n\t\t\tvar undo = gantt._undo;\n\t\t\tundo.updateConfigs();\n\n\t\t\tif(!undo.undo_enabled)\n\t\t\t\treturn;\n\n\t\t\tif(this._batchMode){\n\t\t\t\tthis._batchAction.commands.push(command);\n\t\t\t}else{\n\t\t\t\tvar action = undo.action.create([command]);\n\t\t\t\tundo.logAction(action);\n\t\t\t}\n\t\t},\n\t\t_storeEntityCommand: function(obj, old, actionType, entityType){\n\t\t\tvar undo = gantt._undo;\n\t\t\tvar command = undo.command.create(obj, old, actionType, entityType);\n\t\t\tthis._storeCommand(command);\n\t\t},\n\t\t_storeTaskCommand: function(obj, type){\n\t\t\tthis._storeEntityCommand(obj, this.getInitialTask(obj.id), type, gantt._undo.command.entity.task);\n\t\t},\n\t\t_storeLinkCommand: function(obj, type){\n\t\t\tthis._storeEntityCommand(obj, this.getInitialLink(obj.id), type, gantt._undo.command.entity.link);\n\t\t},\n\n\n\t\tonTaskAdded:function(task){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.add);\n\t\t},\n\t\tonTaskUpdated:function(task){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.update);\n\t\t},\n\t\tonTaskDeleted: function(task){\n\t\t\tif(!this._ignore){\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.remove);\n\t\t\t\tif(this._nestedTasks[task.id]){\n\t\t\t\t\tvar children = this._nestedTasks[task.id];\n\t\t\t\t\tfor(var i = 0; i < children.length; i++){\n\t\t\t\t\t\tthis._storeTaskCommand(children[i], gantt._undo.command.type.remove);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this._nestedLinks[task.id]){\n\t\t\t\t\tvar childrenLinks = this._nestedLinks[task.id];\n\t\t\t\t\tfor(var i = 0; i < childrenLinks.length; i++){\n\t\t\t\t\t\tthis._storeLinkCommand(childrenLinks[i], gantt._undo.command.type.remove);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonLinkAdded: function(link){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.add);\n\t\t},\n\t\tonLinkUpdated: function(link){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.update);\n\t\t},\n\t\tonLinkDeleted: function(link){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.remove);\n\t\t},\n\t\t_initialTasks:{},\n\t\t_nestedTasks:{},\n\t\t_nestedLinks:{},\n\t\t_getLinks: function(task){\n\t\t\treturn task.$source.concat(task.$target);\n\t\t},\n\t\tsetNestedTasks: function(id, taskIds){\n\t\t\tvar task = null,\n\t\t\t\ttasks = [],\n\t\t\t\tlinkIds = this._getLinks(gantt.getTask(id));\n\n\t\t\tfor(var i = 0; i < taskIds.length; i++){\n\t\t\t\ttask = this.setInitialTask(taskIds[i]);\n\n\t\t\t\tlinkIds = linkIds.concat(this._getLinks(task));\n\n\n\t\t\t\ttasks.push(task);\n\t\t\t}\n\n\t\t\tvar uniqueLinks = {};\n\t\t\tfor(var i = 0; i < linkIds.length; i++){\n\t\t\t\tuniqueLinks[linkIds[i]] = true;\n\t\t\t}\n\t\t\tvar links = [];\n\t\t\tfor(var i in uniqueLinks){\n\t\t\t\tlinks.push(this.setInitialLink(i));\n\t\t\t}\n\t\t\tthis._nestedTasks[id] = tasks;\n\t\t\tthis._nestedLinks[id] = links;\n\t\t},\n\t\tsetInitialTask: function(id){\n\t\t\tif(!this._initialTasks[id] || !this._batchMode){\n\t\t\t\tvar task = gantt.copy( gantt.getTask(id));\n\t\t\t\ttask.$index = gantt.getTaskIndex(id);\n\n\t\t\t\tthis._initialTasks[id] = task;\n\t\t\t}\n\t\t\treturn this._initialTasks[id];\n\t\t},\n\t\tgetInitialTask: function(id){\n\t\t\treturn this._initialTasks[id];\n\t\t},\n\n\t\t_initialLinks:{},\n\t\tsetInitialLink: function(id){\n\t\t\tif(!this._initialLinks[id] || !this._batchMode)\n\t\t\t\tthis._initialLinks[id] = gantt.copy(gantt.getLink(id));\n\n\t\t\treturn this._initialLinks[id];\n\t\t},\n\t\tgetInitialLink: function(id){\n\t\t\treturn this._initialLinks[id];\n\t\t}\n\t}\n\n\n};\ngantt._undo.updateConfigs = function(){\n\tgantt._undo.maxSteps = gantt.config.undo_steps;\n\tgantt._undo.command.entity = gantt.config.undo_types;\n\tgantt._undo.command.type = gantt.config.undo_actions;\n\tgantt._undo.undo_enabled = !!gantt.config.undo;\n\tgantt._undo.redo_enabled = (!!gantt.config.undo) && (!!gantt.config.redo);\n};\n\n\n(function(){\n\n\tvar monitor = gantt._undo.monitor;\n\n\tvar noTrack = {\n\t\t\"onBeforeUndo\":\"onAfterUndo\",\n\t\t\"onBeforeRedo\": \"onAfterRedo\"\n\t};\n\tfor(var i in noTrack){\n\t\tgantt.attachEvent(i, function(){\n\t\t\tmonitor.startIgnore();\n\t\t});\n\t\tgantt.attachEvent(noTrack[i], function(){\n\t\t\tmonitor.stopIgnore();\n\t\t});\n\t}\n\n\tvar batchActions = [\n\t\t\"onTaskDragStart\",\n\t\t\"onAfterTaskDelete\",\n\t\t\"onBeforeBatchUpdate\"\n\t];\n\n\tfor(var i  = 0; i < batchActions.length; i++){\n\t\tgantt.attachEvent(batchActions[i], function(){\n\t\t\tmonitor.startBatchAction();\n\t\t});\n\t}\n\tfunction store(id){\n\t\tmonitor.setInitialTask(id);\n\t\treturn true;\n\t}\n\n\n\n\tgantt.attachEvent(\"onBeforeTaskDrag\", store);\n\tgantt.attachEvent(\"onLightbox\", store);\n\tgantt.attachEvent(\"onBeforeTaskAutoSchedule\", function(task){ store(task.id);  return true;});\n\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id){\n\t\tstore(id);\n\t\tvar nested = [];\n\t\tgantt.eachTask(function(task){\n\t\t\tnested.push(task.id);\n\t\t}, id);\n\t\tmonitor.setNestedTasks(id, nested);\n\t\treturn true;\n\t});\n\n\tgantt.attachEvent(\"onAfterTaskAdd\", function(id, task){\n\t\tmonitor.onTaskAdded(task);\n\t});\n\tgantt.attachEvent(\"onAfterTaskUpdate\", function(id, task){\n\t\tmonitor.onTaskUpdated(task);\n\t});\n\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, task){\n\t\tmonitor.onTaskDeleted(task);\n\t});\n\n\tgantt.attachEvent(\"onAfterLinkAdd\", function(id, task){\n\t\tmonitor.onLinkAdded(task);\n\t});\n\tgantt.attachEvent(\"onAfterLinkUpdate\", function(id, task){\n\t\tmonitor.onLinkUpdated(task);\n\t});\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, task){\n\t\tmonitor.onLinkDeleted(task);\n\t});\n\n\tfunction updTask(task, oldId, newId){\n\t\tif(!task) return;\n\n\t\tif(task.id == oldId){\n\t\t\ttask.id = newId;\n\t\t}\n\n\t\tif(task.parent == oldId){\n\t\t\ttask.parent = newId;\n\t\t}\n\t}\n\n\tfunction changeTaskCommandId(command, oldId, newId){\n\t\tupdTask(command.value, oldId, newId);\n\t\tupdTask(command.oldValue, oldId, newId);\n\t}\n\n\tfunction updLink(link, oldTaskId, newTaskId){\n\t\tif(!link) return;\n\t\tif(link.source == oldTaskId){\n\t\t\tlink.source = newTaskId;\n\t\t}\n\t\tif(link.target == oldTaskId){\n\t\t\tlink.target = newTaskId;\n\t\t}\n\t}\n\n\tfunction changeLinkCommandId(command, oldId, newId){\n\t\tupdLink(command.value, oldId, newId);\n\t\tupdLink(command.oldValue, oldId, newId);\n\t}\n\n\tfunction updateTasksIds(log, oldId, newId) {\n\t\tvar undo = gantt._undo;\n\n\t\tfor (var i = 0; i < log.length; i++) {\n\t\t\tvar entry = log[i];\n\t\t\tfor (var j = 0; j < entry.commands.length; j++) {\n\t\t\t\tif (entry.commands[j].entity == undo.command.entity.task) {\n\t\t\t\t\tchangeTaskCommandId(entry.commands[j], oldId, newId);\n\t\t\t\t} else if (entry.commands[j].entity == undo.command.entity.link) {\n\t\t\t\t\tchangeLinkCommandId(entry.commands[j], oldId, newId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction updateLinksIds(log, oldId, newId){\n\t\tvar undo = gantt._undo;\n\n\t\tfor (var i = 0; i < log.length; i++) {\n\t\t\tvar entry = log[i];\n\t\t\tfor (var j = 0; j < entry.commands.length; j++) {\n\t\t\t\tvar command = entry.commands[j];\n\t\t\t\tif (command.entity == undo.command.entity.link) {\n\t\t\t\t\tif(command.value && command.value.id == oldId){\n\t\t\t\t\t\tcommand.value.id = newId;\n\t\t\t\t\t}\n\t\t\t\t\tif(command.oldValue && command.oldValue.id == oldId){\n\t\t\t\t\t\tcommand.oldValue.id = newId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgantt.attachEvent(\"onTaskIdChange\", function(oldId, newId){\n\t\tvar undo = gantt._undo;\n\t\tupdateTasksIds(undo._undoStack,oldId, newId);\n\t\tupdateTasksIds(undo._redoStack,oldId, newId);\n\t});\n\tgantt.attachEvent(\"onLinkIdChange\", function(oldId, newId){\n\t\tvar undo = gantt._undo;\n\t\tupdateLinksIds(undo._undoStack,oldId, newId);\n\t\tupdateLinksIds(undo._redoStack,oldId, newId);\n\t});\n\tgantt.attachEvent(\"onGanttReady\", function(){\n\t\tgantt._undo.updateConfigs();\n\t});\n})();\n\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// dhtmlxgantt_undo.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 27);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4a949578cbbb066f713d","gantt.config.undo_steps = 10;\ngantt.config.undo = true;\ngantt.config.redo = true;\n\ngantt.undo = function(){\n\tthis._undo.undo();\n};\n\ngantt.getUndoStack = function(){\n\treturn this._undo._undoStack;\n};\n\ngantt.getRedoStack = function(){\n\treturn this._undo._redoStack;\n};\n\ngantt.redo = function(){\n\tthis._undo.redo();\n};\n\n/**\n * entities that require different processing for undoing-redoing changes\n * @type {{link: string, task: string}}\n */\ngantt.config.undo_types = {\n\tlink: \"link\",\n\ttask: \"task\"\n};\n\n/**\n * types of traced actions\n * @type {{update: string, remove: string, add: string}}\n */\ngantt.config.undo_actions = {\n\tupdate:\"update\",\n\tremove:\"remove\",// remove item from datastore\n\tadd:\"add\"\n};\n\ngantt._undo = {\n\t_undoStack:[],\n\t_redoStack:[],\n\tmaxSteps:10,\n\tundo_enabled: true,\n\tredo_enabled: true,\n\t_push: function(stack, action){\n\t\tif(!action.commands.length)\n\t\t\treturn;\n\n\n\t\tstack.push(action);\n\t\twhile(stack.length > this.maxSteps){\n\t\t\tstack.shift();\n\t\t}\n\t\treturn action;\n\t},\n\t_pop:function(stack){\n\t\treturn stack.pop();\n\t},\n\n\tundo:function(){\n\t\tthis.updateConfigs();\n\t\tif(!this.undo_enabled)\n\t\t\treturn;\n\n\t\tvar action = this._pop(this._undoStack);\n\t\tif(gantt.callEvent(\"onBeforeUndo\", [action]) !== false){\n\t\t\tif(action){\n\n\t\t\t\tthis._applyAction(this.action.invert(action));\n\t\t\t\tthis._push(this._redoStack, action);\n\t\t\t}\n\t\t}\n\t\tgantt.callEvent(\"onAfterUndo\", []);\n\t},\n\n\tredo:function(){\n\t\tthis.updateConfigs();\n\t\tif(!this.redo_enabled)\n\t\t\treturn;\n\n\t\tvar action = this._pop(this._redoStack);\n\t\t\tif(gantt.callEvent(\"onBeforeRedo\", [action]) !== false){\n\t\t\t\tif(action){\n\t\t\t\t\tthis._applyAction(action);\n\t\t\t\t\tthis._push(this._undoStack, action);\n\t\t\t\t}\n\t\t}\n\t\tgantt.callEvent(\"onAfterRedo\", []);\n\t},\n\n\t_applyAction:function(action){\n\t\tvar command = null,\n\t\t\tentities = this.command.entity,\n\t\t\tactions = this.command.type;\n\n\t\tvar methods = {};\n\t\tmethods[entities.task] = {\n\t\t\tadd: \"addTask\",\n\t\t\tupdate: \"updateTask\",\n\t\t\tremove: \"deleteTask\",\n\t\t\tisExists: \"isTaskExists\"\n\t\t};\n\t\tmethods[entities.link] = {\n\t\t\tadd: \"addLink\",\n\t\t\tupdate: \"updateLink\",\n\t\t\tremove: \"deleteLink\",\n\t\t\tisExists: \"isLinkExists\"\n\t\t};\n\n\t\tgantt.batchUpdate(function(){\n\t\t\tfor(var i = 0; i < action.commands.length; i++){\n\t\t\t\tcommand = action.commands[i];\n\t\t\t\tvar method = methods[command.entity][command.type],\n\t\t\t\t\tcheck = methods[command.entity][\"isExists\"];\n\n\t\t\t\tif(command.type == actions.add){\n\t\t\t\t\tgantt[method](command.oldValue, command.oldValue.parent, command.oldValue.$index);\n\t\t\t\t}else if(command.type == actions.remove){\n\t\t\t\t\tif(gantt[check](command.value.id))\n\t\t\t\t\t\tgantt[method](command.value.id);\n\t\t\t\t}else if(command.type == actions.update){\n\n\t\t\t\t\tgantt[method](command.value.id, command.value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t//storeUndo:\n\tlogAction: function(action){\n\t\tthis._push(this._undoStack, action);\n\t\tthis._redoStack = [];\n\t},\n\n\taction: {\n\t\tcreate: function(commands){\n\t\t\treturn {commands: commands ? commands.slice() : []};\n\t\t},\n\t\tinvert: function(action){\n\t\t\tvar revert = gantt.copy(action);\n\t\t\tvar commands = gantt._undo.command;\n\n\t\t\tfor(var i = 0; i < action.commands.length; i++){\n\t\t\t\tvar command = revert.commands[i] = commands.invert(revert.commands[i]);\n\t\t\t\tif(command.type == commands.type.update){\n\t\t\t\t\tvar value = command.value;\n\t\t\t\t\tcommand.value = command.oldValue;\n\t\t\t\t\tcommand.oldValue = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn revert;\n\t\t}\n\t},\n\n\tcommand:{\n\t\tcreate: function(value, oldValue, type, entity){\n\t\t\treturn {\n\t\t\t\tentity:entity,\n\t\t\t\ttype:type,\n\t\t\t\tvalue:gantt.copy(value),\n\t\t\t\toldValue:gantt.copy(oldValue || value)\n\t\t\t};\n\t\t},\n\t\tinvert: function(command){\n\t\t\tvar revert = gantt.copy(command);\n\t\t\trevert.type = this.inverseCommands(command.type);\n\t\t\treturn revert;\n\t\t},\n\t\t// entities that require different processing for undoing-redoing changes\n\t\tentity:null,\n\n\t\t//types of traced actions\n\t\ttype:null,\n\t\tinverseCommands:function(command){\n\t\t\tswitch (command){\n\t\t\t\tcase this.type.update:\n\t\t\t\t\treturn this.type.update;\n\t\t\t\tcase this.type.remove:\n\t\t\t\t\treturn this.type.add;\n\t\t\t\tcase this.type.add:\n\t\t\t\t\treturn this.type.remove;\n\t\t\t\tcase this.type.load:\n\t\t\t\t\treturn this.type.clear;\n\t\t\t\tcase this.type.clear:\n\t\t\t\t\treturn this.type.load;\n\t\t\t\tdefault:\n\t\t\t\t\tgantt.assert(false, \"Invalid command \"+ command);\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t},\n\n\tmonitor: {\n\t\t_batchAction: null,\n\t\t_batchMode: false,\n\t\t_ignore: false,\n\t\tstartIgnore: function(){\n\t\t\tthis._ignore = true;\n\t\t},\n\t\tstopIgnore: function(){\n\t\t\tthis._ignore = false;\n\t\t},\n\t\tstartBatchAction : function(){\n\t\t\t// try catching updates made from event handlers using timeout\n\t\t\tif(this.timeout){\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t}\n\t\t\tthis.timeout = setTimeout(function(){\n\t\t\t\tgantt._undo.monitor.stopBatchAction();\n\t\t\t}, 10);\n\n\n\t\t\tif(this._ignore || this._batchMode)\n\t\t\t\treturn;\n\n\t\t\tthis._batchMode = true;\n\t\t\tthis._batchAction = gantt._undo.action.create();\n\t\t},\n\t\tstopBatchAction: function(){\n\t\t\tif(this._ignore)\n\t\t\t\treturn;\n\t\t\tvar undo = gantt._undo;\n\t\t\tif(this._batchAction){\n\t\t\t\tundo.logAction(this._batchAction);\n\t\t\t}\n\t\t\tthis._batchMode = false;\n\t\t\tthis._batchAction = null;\n\t\t},\n\n\t\t_storeCommand: function(command){\n\t\t\tvar undo = gantt._undo;\n\t\t\tundo.updateConfigs();\n\n\t\t\tif(!undo.undo_enabled)\n\t\t\t\treturn;\n\n\t\t\tif(this._batchMode){\n\t\t\t\tthis._batchAction.commands.push(command);\n\t\t\t}else{\n\t\t\t\tvar action = undo.action.create([command]);\n\t\t\t\tundo.logAction(action);\n\t\t\t}\n\t\t},\n\t\t_storeEntityCommand: function(obj, old, actionType, entityType){\n\t\t\tvar undo = gantt._undo;\n\t\t\tvar command = undo.command.create(obj, old, actionType, entityType);\n\t\t\tthis._storeCommand(command);\n\t\t},\n\t\t_storeTaskCommand: function(obj, type){\n\t\t\tthis._storeEntityCommand(obj, this.getInitialTask(obj.id), type, gantt._undo.command.entity.task);\n\t\t},\n\t\t_storeLinkCommand: function(obj, type){\n\t\t\tthis._storeEntityCommand(obj, this.getInitialLink(obj.id), type, gantt._undo.command.entity.link);\n\t\t},\n\n\n\t\tonTaskAdded:function(task){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.add);\n\t\t},\n\t\tonTaskUpdated:function(task){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.update);\n\t\t},\n\t\tonTaskDeleted: function(task){\n\t\t\tif(!this._ignore){\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.remove);\n\t\t\t\tif(this._nestedTasks[task.id]){\n\t\t\t\t\tvar children = this._nestedTasks[task.id];\n\t\t\t\t\tfor(var i = 0; i < children.length; i++){\n\t\t\t\t\t\tthis._storeTaskCommand(children[i], gantt._undo.command.type.remove);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this._nestedLinks[task.id]){\n\t\t\t\t\tvar childrenLinks = this._nestedLinks[task.id];\n\t\t\t\t\tfor(var i = 0; i < childrenLinks.length; i++){\n\t\t\t\t\t\tthis._storeLinkCommand(childrenLinks[i], gantt._undo.command.type.remove);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonLinkAdded: function(link){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.add);\n\t\t},\n\t\tonLinkUpdated: function(link){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.update);\n\t\t},\n\t\tonLinkDeleted: function(link){\n\t\t\tif(!this._ignore)\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.remove);\n\t\t},\n\t\t_initialTasks:{},\n\t\t_nestedTasks:{},\n\t\t_nestedLinks:{},\n\t\t_getLinks: function(task){\n\t\t\treturn task.$source.concat(task.$target);\n\t\t},\n\t\tsetNestedTasks: function(id, taskIds){\n\t\t\tvar task = null,\n\t\t\t\ttasks = [],\n\t\t\t\tlinkIds = this._getLinks(gantt.getTask(id));\n\n\t\t\tfor(var i = 0; i < taskIds.length; i++){\n\t\t\t\ttask = this.setInitialTask(taskIds[i]);\n\n\t\t\t\tlinkIds = linkIds.concat(this._getLinks(task));\n\n\n\t\t\t\ttasks.push(task);\n\t\t\t}\n\n\t\t\tvar uniqueLinks = {};\n\t\t\tfor(var i = 0; i < linkIds.length; i++){\n\t\t\t\tuniqueLinks[linkIds[i]] = true;\n\t\t\t}\n\t\t\tvar links = [];\n\t\t\tfor(var i in uniqueLinks){\n\t\t\t\tlinks.push(this.setInitialLink(i));\n\t\t\t}\n\t\t\tthis._nestedTasks[id] = tasks;\n\t\t\tthis._nestedLinks[id] = links;\n\t\t},\n\t\tsetInitialTask: function(id){\n\t\t\tif(!this._initialTasks[id] || !this._batchMode){\n\t\t\t\tvar task = gantt.copy( gantt.getTask(id));\n\t\t\t\ttask.$index = gantt.getTaskIndex(id);\n\n\t\t\t\tthis._initialTasks[id] = task;\n\t\t\t}\n\t\t\treturn this._initialTasks[id];\n\t\t},\n\t\tgetInitialTask: function(id){\n\t\t\treturn this._initialTasks[id];\n\t\t},\n\n\t\t_initialLinks:{},\n\t\tsetInitialLink: function(id){\n\t\t\tif(!this._initialLinks[id] || !this._batchMode)\n\t\t\t\tthis._initialLinks[id] = gantt.copy(gantt.getLink(id));\n\n\t\t\treturn this._initialLinks[id];\n\t\t},\n\t\tgetInitialLink: function(id){\n\t\t\treturn this._initialLinks[id];\n\t\t}\n\t}\n\n\n};\ngantt._undo.updateConfigs = function(){\n\tgantt._undo.maxSteps = gantt.config.undo_steps;\n\tgantt._undo.command.entity = gantt.config.undo_types;\n\tgantt._undo.command.type = gantt.config.undo_actions;\n\tgantt._undo.undo_enabled = !!gantt.config.undo;\n\tgantt._undo.redo_enabled = (!!gantt.config.undo) && (!!gantt.config.redo);\n};\n\n\n(function(){\n\n\tvar monitor = gantt._undo.monitor;\n\n\tvar noTrack = {\n\t\t\"onBeforeUndo\":\"onAfterUndo\",\n\t\t\"onBeforeRedo\": \"onAfterRedo\"\n\t};\n\tfor(var i in noTrack){\n\t\tgantt.attachEvent(i, function(){\n\t\t\tmonitor.startIgnore();\n\t\t});\n\t\tgantt.attachEvent(noTrack[i], function(){\n\t\t\tmonitor.stopIgnore();\n\t\t});\n\t}\n\n\tvar batchActions = [\n\t\t\"onTaskDragStart\",\n\t\t\"onAfterTaskDelete\",\n\t\t\"onBeforeBatchUpdate\"\n\t];\n\n\tfor(var i  = 0; i < batchActions.length; i++){\n\t\tgantt.attachEvent(batchActions[i], function(){\n\t\t\tmonitor.startBatchAction();\n\t\t});\n\t}\n\tfunction store(id){\n\t\tmonitor.setInitialTask(id);\n\t\treturn true;\n\t}\n\n\n\n\tgantt.attachEvent(\"onBeforeTaskDrag\", store);\n\tgantt.attachEvent(\"onLightbox\", store);\n\tgantt.attachEvent(\"onBeforeTaskAutoSchedule\", function(task){ store(task.id);  return true;});\n\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id){\n\t\tstore(id);\n\t\tvar nested = [];\n\t\tgantt.eachTask(function(task){\n\t\t\tnested.push(task.id);\n\t\t}, id);\n\t\tmonitor.setNestedTasks(id, nested);\n\t\treturn true;\n\t});\n\n\tgantt.attachEvent(\"onAfterTaskAdd\", function(id, task){\n\t\tmonitor.onTaskAdded(task);\n\t});\n\tgantt.attachEvent(\"onAfterTaskUpdate\", function(id, task){\n\t\tmonitor.onTaskUpdated(task);\n\t});\n\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, task){\n\t\tmonitor.onTaskDeleted(task);\n\t});\n\n\tgantt.attachEvent(\"onAfterLinkAdd\", function(id, task){\n\t\tmonitor.onLinkAdded(task);\n\t});\n\tgantt.attachEvent(\"onAfterLinkUpdate\", function(id, task){\n\t\tmonitor.onLinkUpdated(task);\n\t});\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, task){\n\t\tmonitor.onLinkDeleted(task);\n\t});\n\n\tfunction updTask(task, oldId, newId){\n\t\tif(!task) return;\n\n\t\tif(task.id == oldId){\n\t\t\ttask.id = newId;\n\t\t}\n\n\t\tif(task.parent == oldId){\n\t\t\ttask.parent = newId;\n\t\t}\n\t}\n\n\tfunction changeTaskCommandId(command, oldId, newId){\n\t\tupdTask(command.value, oldId, newId);\n\t\tupdTask(command.oldValue, oldId, newId);\n\t}\n\n\tfunction updLink(link, oldTaskId, newTaskId){\n\t\tif(!link) return;\n\t\tif(link.source == oldTaskId){\n\t\t\tlink.source = newTaskId;\n\t\t}\n\t\tif(link.target == oldTaskId){\n\t\t\tlink.target = newTaskId;\n\t\t}\n\t}\n\n\tfunction changeLinkCommandId(command, oldId, newId){\n\t\tupdLink(command.value, oldId, newId);\n\t\tupdLink(command.oldValue, oldId, newId);\n\t}\n\n\tfunction updateTasksIds(log, oldId, newId) {\n\t\tvar undo = gantt._undo;\n\n\t\tfor (var i = 0; i < log.length; i++) {\n\t\t\tvar entry = log[i];\n\t\t\tfor (var j = 0; j < entry.commands.length; j++) {\n\t\t\t\tif (entry.commands[j].entity == undo.command.entity.task) {\n\t\t\t\t\tchangeTaskCommandId(entry.commands[j], oldId, newId);\n\t\t\t\t} else if (entry.commands[j].entity == undo.command.entity.link) {\n\t\t\t\t\tchangeLinkCommandId(entry.commands[j], oldId, newId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction updateLinksIds(log, oldId, newId){\n\t\tvar undo = gantt._undo;\n\n\t\tfor (var i = 0; i < log.length; i++) {\n\t\t\tvar entry = log[i];\n\t\t\tfor (var j = 0; j < entry.commands.length; j++) {\n\t\t\t\tvar command = entry.commands[j];\n\t\t\t\tif (command.entity == undo.command.entity.link) {\n\t\t\t\t\tif(command.value && command.value.id == oldId){\n\t\t\t\t\t\tcommand.value.id = newId;\n\t\t\t\t\t}\n\t\t\t\t\tif(command.oldValue && command.oldValue.id == oldId){\n\t\t\t\t\t\tcommand.oldValue.id = newId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgantt.attachEvent(\"onTaskIdChange\", function(oldId, newId){\n\t\tvar undo = gantt._undo;\n\t\tupdateTasksIds(undo._undoStack,oldId, newId);\n\t\tupdateTasksIds(undo._redoStack,oldId, newId);\n\t});\n\tgantt.attachEvent(\"onLinkIdChange\", function(oldId, newId){\n\t\tvar undo = gantt._undo;\n\t\tupdateLinksIds(undo._undoStack,oldId, newId);\n\t\tupdateLinksIds(undo._redoStack,oldId, newId);\n\t});\n\tgantt.attachEvent(\"onGanttReady\", function(){\n\t\tgantt._undo.updateConfigs();\n\t});\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/ext/undo.js\n// module id = 28\n// module chunks = 2"],"sourceRoot":""}